{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "fb-carousel",
  "title": "Carousel",
  "description": "fly-byデザインシステムのCarouselコンポーネント。スライダー/カルーセル。",
  "dependencies": [
    "embla-carousel-react",
    "lucide-react"
  ],
  "registryDependencies": [
    "fb-button"
  ],
  "files": [
    {
      "path": "registry/fly-by/ui/fb-carousel.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { FbButton } from \"@/registry/fly-by/ui/fb-button\"\n\n/**\n * fly-by Carousel\n *\n * embla-carousel-react ベースのカルーセルコンポーネント。\n *\n * クラス構造: fb-carousel, fb-carousel-content, fb-carousel-item,\n *            fb-carousel-previous, fb-carousel-next\n *\n * @example\n * <FbCarousel>\n *   <FbCarouselContent>\n *     <FbCarouselItem>\n *       <img src=\"slide1.jpg\" alt=\"Slide 1\" />\n *     </FbCarouselItem>\n *     <FbCarouselItem>\n *       <img src=\"slide2.jpg\" alt=\"Slide 2\" />\n *     </FbCarouselItem>\n *   </FbCarouselContent>\n *   <FbCarouselPrevious />\n *   <FbCarouselNext />\n * </FbCarousel>\n */\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <FbCarousel />\")\n  }\n\n  return context\n}\n\nfunction FbCarousel({\n  orientation = \"horizontal\",\n  opts,\n  setApi,\n  plugins,\n  className,\n  children,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement> & CarouselProps) {\n  const [carouselRef, api] = useEmblaCarousel(\n    {\n      ...opts,\n      axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n    },\n    plugins\n  )\n  const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n  const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n  const onSelect = React.useCallback((api: CarouselApi) => {\n    if (!api) {\n      return\n    }\n\n    setCanScrollPrev(api.canScrollPrev())\n    setCanScrollNext(api.canScrollNext())\n  }, [])\n\n  const scrollPrev = React.useCallback(() => {\n    api?.scrollPrev()\n  }, [api])\n\n  const scrollNext = React.useCallback(() => {\n    api?.scrollNext()\n  }, [api])\n\n  const handleKeyDown = React.useCallback(\n    (event: React.KeyboardEvent<HTMLDivElement>) => {\n      if (event.key === \"ArrowLeft\") {\n        event.preventDefault()\n        scrollPrev()\n      } else if (event.key === \"ArrowRight\") {\n        event.preventDefault()\n        scrollNext()\n      }\n    },\n    [scrollPrev, scrollNext]\n  )\n\n  React.useEffect(() => {\n    if (!api || !setApi) {\n      return\n    }\n\n    setApi(api)\n  }, [api, setApi])\n\n  React.useEffect(() => {\n    if (!api) {\n      return\n    }\n\n    onSelect(api)\n    api.on(\"reInit\", onSelect)\n    api.on(\"select\", onSelect)\n\n    return () => {\n      api?.off(\"select\", onSelect)\n    }\n  }, [api, onSelect])\n\n  return (\n    <CarouselContext.Provider\n      value={{\n        carouselRef,\n        api: api,\n        opts,\n        orientation:\n          orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n        scrollPrev,\n        scrollNext,\n        canScrollPrev,\n        canScrollNext,\n      }}\n    >\n      <div\n        data-slot=\"fb-carousel\"\n        onKeyDownCapture={handleKeyDown}\n        className={cn(\"fb-carousel relative\", className)}\n        role=\"region\"\n        aria-roledescription=\"carousel\"\n        {...props}\n      >\n        {children}\n      </div>\n    </CarouselContext.Provider>\n  )\n}\n\nfunction FbCarouselContent({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        data-slot=\"fb-carousel-content\"\n        className={cn(\n          \"fb-carousel-content flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n}\n\nfunction FbCarouselItem({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      data-slot=\"fb-carousel-item\"\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"fb-carousel-item min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction FbCarouselPrevious({\n  className,\n  appearance = \"outlined\",\n  color = \"neutral\",\n  ...props\n}: React.ComponentProps<typeof FbButton>) {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <FbButton\n      data-slot=\"fb-carousel-previous\"\n      appearance={appearance}\n      color={color}\n      size=\"s\"\n      className={cn(\n        \"fb-carousel-previous absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">前のスライド</span>\n    </FbButton>\n  )\n}\n\nfunction FbCarouselNext({\n  className,\n  appearance = \"outlined\",\n  color = \"neutral\",\n  ...props\n}: React.ComponentProps<typeof FbButton>) {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <FbButton\n      data-slot=\"fb-carousel-next\"\n      appearance={appearance}\n      color={color}\n      size=\"s\"\n      className={cn(\n        \"fb-carousel-next absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">次のスライド</span>\n    </FbButton>\n  )\n}\n\nexport {\n  type CarouselApi,\n  FbCarousel,\n  FbCarouselContent,\n  FbCarouselItem,\n  FbCarouselPrevious,\n  FbCarouselNext,\n}\n",
      "type": "registry:ui"
    }
  ],
  "type": "registry:ui"
}