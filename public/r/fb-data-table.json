{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "fb-data-table",
  "title": "Data Table",
  "description": "fly-byデザインシステムのData Tableコンポーネント。ソート、フィルタ、ページネーション付きテーブル。",
  "dependencies": [
    "@tanstack/react-table",
    "lucide-react"
  ],
  "registryDependencies": [
    "fb-button",
    "fb-dropdown-menu",
    "fb-input",
    "fb-table"
  ],
  "files": [
    {
      "path": "registry/fly-by/ui/fb-data-table.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport {\n  ColumnDef,\n  ColumnFiltersState,\n  SortingState,\n  VisibilityState,\n  flexRender,\n  getCoreRowModel,\n  getFilteredRowModel,\n  getPaginationRowModel,\n  getSortedRowModel,\n  useReactTable,\n} from \"@tanstack/react-table\"\nimport { ArrowUpDown, ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { FbButton } from \"@/registry/fly-by/ui/fb-button\"\nimport {\n  FbDropdownMenu,\n  FbDropdownMenuCheckboxItem,\n  FbDropdownMenuContent,\n  FbDropdownMenuTrigger,\n} from \"@/registry/fly-by/ui/fb-dropdown-menu\"\nimport { FbInput } from \"@/registry/fly-by/ui/fb-input\"\nimport {\n  FbTable,\n  FbTableBody,\n  FbTableCell,\n  FbTableHead,\n  FbTableHeader,\n  FbTableRow,\n} from \"@/registry/fly-by/ui/fb-table\"\n\n/**\n * fly-by Data Table\n *\n * @tanstack/react-table をラップしたデータテーブル。\n * ソート、フィルタリング、ページネーション、列の表示/非表示をサポート。\n *\n * クラス構造: fb-data-table\n *\n * @example\n * const columns: ColumnDef<User>[] = [\n *   {\n *     accessorKey: \"name\",\n *     header: \"名前\",\n *   },\n *   {\n *     accessorKey: \"email\",\n *     header: ({ column }) => (\n *       <FbDataTableColumnHeader column={column} title=\"メール\" />\n *     ),\n *   },\n * ]\n *\n * <FbDataTable columns={columns} data={users} />\n */\n\ninterface FbDataTableProps<TData, TValue> {\n  columns: ColumnDef<TData, TValue>[]\n  data: TData[]\n  searchColumn?: string\n  searchPlaceholder?: string\n  showColumnToggle?: boolean\n  showPagination?: boolean\n  className?: string\n}\n\nfunction FbDataTable<TData, TValue>({\n  columns,\n  data,\n  searchColumn,\n  searchPlaceholder = \"フィルター...\",\n  showColumnToggle = true,\n  showPagination = true,\n  className,\n}: FbDataTableProps<TData, TValue>) {\n  const [sorting, setSorting] = React.useState<SortingState>([])\n  const [columnFilters, setColumnFilters] = React.useState<ColumnFiltersState>(\n    []\n  )\n  const [columnVisibility, setColumnVisibility] =\n    React.useState<VisibilityState>({})\n  const [rowSelection, setRowSelection] = React.useState({})\n\n  const table = useReactTable({\n    data,\n    columns,\n    onSortingChange: setSorting,\n    onColumnFiltersChange: setColumnFilters,\n    getCoreRowModel: getCoreRowModel(),\n    getPaginationRowModel: getPaginationRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    getFilteredRowModel: getFilteredRowModel(),\n    onColumnVisibilityChange: setColumnVisibility,\n    onRowSelectionChange: setRowSelection,\n    state: {\n      sorting,\n      columnFilters,\n      columnVisibility,\n      rowSelection,\n    },\n  })\n\n  return (\n    <div data-slot=\"fb-data-table\" className={cn(\"fb-data-table w-full\", className)}>\n      <div className=\"flex items-center gap-4 py-4\">\n        {searchColumn && (\n          <FbInput\n            placeholder={searchPlaceholder}\n            value={\n              (table.getColumn(searchColumn)?.getFilterValue() as string) ?? \"\"\n            }\n            onChange={(event) =>\n              table.getColumn(searchColumn)?.setFilterValue(event.target.value)\n            }\n            className=\"max-w-sm\"\n          />\n        )}\n        {showColumnToggle && (\n          <FbDropdownMenu>\n            <FbDropdownMenuTrigger asChild>\n              <FbButton appearance=\"outlined\" color=\"neutral\" className=\"ml-auto\">\n                列 <ChevronDown className=\"ml-2 h-4 w-4\" />\n              </FbButton>\n            </FbDropdownMenuTrigger>\n            <FbDropdownMenuContent align=\"end\">\n              {table\n                .getAllColumns()\n                .filter((column) => column.getCanHide())\n                .map((column) => {\n                  return (\n                    <FbDropdownMenuCheckboxItem\n                      key={column.id}\n                      className=\"capitalize\"\n                      checked={column.getIsVisible()}\n                      onCheckedChange={(value) =>\n                        column.toggleVisibility(!!value)\n                      }\n                    >\n                      {column.id}\n                    </FbDropdownMenuCheckboxItem>\n                  )\n                })}\n            </FbDropdownMenuContent>\n          </FbDropdownMenu>\n        )}\n      </div>\n      <div className=\"rounded-md border border-gray-200 dark:border-gray-700\">\n        <FbTable>\n          <FbTableHeader>\n            {table.getHeaderGroups().map((headerGroup) => (\n              <FbTableRow key={headerGroup.id}>\n                {headerGroup.headers.map((header) => {\n                  return (\n                    <FbTableHead key={header.id}>\n                      {header.isPlaceholder\n                        ? null\n                        : flexRender(\n                            header.column.columnDef.header,\n                            header.getContext()\n                          )}\n                    </FbTableHead>\n                  )\n                })}\n              </FbTableRow>\n            ))}\n          </FbTableHeader>\n          <FbTableBody>\n            {table.getRowModel().rows?.length ? (\n              table.getRowModel().rows.map((row) => (\n                <FbTableRow\n                  key={row.id}\n                  data-state={row.getIsSelected() && \"selected\"}\n                >\n                  {row.getVisibleCells().map((cell) => (\n                    <FbTableCell key={cell.id}>\n                      {flexRender(\n                        cell.column.columnDef.cell,\n                        cell.getContext()\n                      )}\n                    </FbTableCell>\n                  ))}\n                </FbTableRow>\n              ))\n            ) : (\n              <FbTableRow>\n                <FbTableCell\n                  colSpan={columns.length}\n                  className=\"h-24 text-center\"\n                >\n                  データがありません\n                </FbTableCell>\n              </FbTableRow>\n            )}\n          </FbTableBody>\n        </FbTable>\n      </div>\n      {showPagination && (\n        <div className=\"flex items-center justify-end space-x-2 py-4\">\n          <div className=\"flex-1 text-sm text-gray-500 dark:text-gray-400\">\n            {table.getFilteredSelectedRowModel().rows.length} /{\" \"}\n            {table.getFilteredRowModel().rows.length} 行を選択中\n          </div>\n          <div className=\"space-x-2\">\n            <FbButton\n              appearance=\"outlined\"\n              color=\"neutral\"\n              size=\"s\"\n              onClick={() => table.previousPage()}\n              disabled={!table.getCanPreviousPage()}\n            >\n              前へ\n            </FbButton>\n            <FbButton\n              appearance=\"outlined\"\n              color=\"neutral\"\n              size=\"s\"\n              onClick={() => table.nextPage()}\n              disabled={!table.getCanNextPage()}\n            >\n              次へ\n            </FbButton>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\n// Column header with sorting\ninterface FbDataTableColumnHeaderProps<TData, TValue>\n  extends React.HTMLAttributes<HTMLDivElement> {\n  column: import(\"@tanstack/react-table\").Column<TData, TValue>\n  title: string\n}\n\nfunction FbDataTableColumnHeader<TData, TValue>({\n  column,\n  title,\n  className,\n}: FbDataTableColumnHeaderProps<TData, TValue>) {\n  if (!column.getCanSort()) {\n    return <div className={cn(className)}>{title}</div>\n  }\n\n  return (\n    <FbButton\n      appearance=\"transparent\"\n      color=\"neutral\"\n      size=\"s\"\n      className=\"-ml-3 h-8\"\n      onClick={() => column.toggleSorting(column.getIsSorted() === \"asc\")}\n    >\n      {title}\n      <ArrowUpDown className=\"ml-2 h-4 w-4\" />\n    </FbButton>\n  )\n}\n\nexport { FbDataTable, FbDataTableColumnHeader }\nexport type { FbDataTableProps }\n",
      "type": "registry:ui"
    }
  ],
  "type": "registry:ui"
}